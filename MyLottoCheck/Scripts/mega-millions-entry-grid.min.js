$(document).ready(function(){function t(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]}var u=function(){$('[id^="numbers-table"]').each(function(){$(this).find("> tbody > tr > td").each(function(n){$(this).width($($("#add-pick-table-noauth tr td")[n]).width())})})},r=function(){$(".error-anchor-bottom").each(function(){var n=$(this).closest("td").find("input").position(),t=n.top+44,i=n.left-16;$(this).css({top:t,left:i,position:"absolute"}).width(20)});$(".error-anchor-top").each(function(){var n=$(this).closest("td").find("input").position(),t=n.top-34,i=n.left-10;$(this).css({top:t,left:i,position:"absolute"})})},n=function(n,t){$(n).find("*").not(".btn").not("span").each(function(){$(this).addClass("errorHighlighted")});setTimeout(function(){$(n).find("*").not(".btn").not("span").each(function(){$(this).removeClass("errorHighlighted")})},250);toastr.error(t)},s,f,h,c,l,a,v,y,p,i,e,o;$("#button-add").on("click",function(i){var o,s,f,c,e;return(i.preventDefault(),o=$(this).closest("form"),s=$(o).validate().form(),!s)?!1:(f=checkType=="set"?$("#button-add").closest("tr"):$("#add-row"),c={FirstPick:f.find("input:eq(0)").val(),SecondPick:f.find("input:eq(1)").val(),ThirdPick:f.find("input:eq(2)").val(),FourthPick:f.find("input:eq(3)").val(),FifthPick:f.find("input:eq(4)").val(),MegaPick:f.find("input:eq(5)").val()},e=app.ajax({url:window.createAction+"?checkType="+t("checkType"),context:this,contentType:"application/json; charset=utf-8",type:"POST",datatype:"json",data:JSON.stringify(c),error:function(){e.status===409?n(f,"Pick already exists, pick not added."):n(f,"Could not add this pick.")},success:function(t){var s,o,c,b;if(e.status===400)n(f,"Could not add this pick.");else{var l=f.find("input:eq(0)").val(),a=f.find("input:eq(1)").val(),v=f.find("input:eq(2)").val(),y=f.find("input:eq(3)").val(),p=f.find("input:eq(4)").val(),w=f.find("input:eq(5)").val(),i=$(".wrapper form").length+1;checkType=="set"&&(s=h.clone(!0),s.prop("id","mega-millions-form"+i),o=$(s,"table","tbody","tr"),s.find("tr input").each(function(){var t=$(this).prop("name")+i,n;$(this).prop("name",t);n=$(this).prop("id")+i;$(this).prop("id",n)}),o.find("button[data-id]").each(function(){$(this).attr("data-id",t.Id)}),o.find("span[data-valmsg-for]").each(function(n){n===0&&$(this).attr("data-valmsg-for","FirstPick"+i);n===1&&$(this).attr("data-valmsg-for","second-pick"+i);n===2&&$(this).attr("data-valmsg-for","third-pick"+i);n===3&&$(this).attr("data-valmsg-for","fourth-pick"+i);n===4&&$(this).attr("data-valmsg-for","fifth-pick"+i);n===5&&$(this).attr("data-valmsg-for","mega-pick"+i)}),o.find("input:eq(1)").val(l),o.find("input:eq(2)").val(a),o.find("input:eq(3)").val(v),o.find("input:eq(4)").val(y),o.find("input:eq(5)").val(p),o.find("input:eq(6)").val(w),$(s).insertBefore("#form-insert-marker"),c=$("#numbers-table"),c.prop("id",c.prop("id")+i),b=$("#table-row"),c-f.prop("id",c-f.prop("id")+i),s.removeData("validator").removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse(s),s.validate(),$("#second-pick"+i).rules("add",{checkNumber2:!0,messages:{checkNumber2:"Duplicate"}}),$("#third-pick"+i).rules("add",{checkNumber3:!0,messages:{checkNumber3:"Duplicate"}}),$("#fourth-pick"+i).rules("add",{checkNumber4:!0,messages:{checkNumber4:"Duplicate"}}),$("#fifth-pick"+i).rules("add",{checkNumber5:!0,messages:{checkNumber5:"Duplicate"}}),$(".button-update").hide(),$(".button-cancel").hide(),$(f).find("input").val(""),$("#mega-millions-add-form").validate().resetForm(),u(),toastr.success("Pick added."))}r();window.getWinningDraws();f.find("*").not(".btn").not("span").each(function(){$(this).addClass("highlighted")});setTimeout(function(){f.find("*").not(".btn").not("span").each(function(){$(this).removeClass("highlighted")})},150);window.getWinningDraws()}}),!1)});$("#button-clear").on("click",function(n){var t;n.preventDefault();$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error");t=checkType=="set"?$("#button-add").closest("tr"):$("#add-row");t.find("input").val("");$("#mega-millions-add-form").validate().resetForm()});$(document).on("click",".button-update",function(r){var e,f;r.preventDefault();var u=$(this).closest("tr"),o=$(this).closest("form"),s=$(o).validate().form();return s?($(".field-validation-error").addClass("field-validation-valid"),$(".field-validation-error").removeClass("field-validation-error"),e={id:$(this).attr("data-id"),FirstPick:u.find("input:eq(0)").val(),SecondPick:u.find("input:eq(1)").val(),ThirdPick:u.find("input:eq(2)").val(),FourthPick:u.find("input:eq(3)").val(),FifthPick:u.find("input:eq(4)").val(),MegaPick:u.find("input:eq(5)").val()},f=app.ajax({url:window.updateAction+"?checkType="+t("checkType"),context:this,contentType:"application/json; charset=utf-8",type:"PUT",datatype:"json",data:JSON.stringify(e),error:function(){f.status===409?n(u,"Pick already exists, pick not updated."):n(u,"Pick could not be updated.")},success:function(){f.status===304?n(u,"Pick could not be updated."):($(this).hide(),$(".button-delete").show(),$(".button-edit").show(),$(this).nextAll(".button-cancel:first").hide(),$(".lotto-box").removeClass("input-validation-error"),u.find("input").removeClass("lotto-box").addClass("lotto-text").attr("readonly",!0),u.find("*").not(".btn").not("span").each(function(){$(this).addClass("highlighted")}),setTimeout(function(){u.find("*").not(".btn").not("span").each(function(){$(this).removeClass("highlighted")});$("#button-add").attr("disabled",!1);$("#button-clear").attr("disabled",!1);var n=$("#button-add").closest("tr");n.find("input").attr("disabled",!1).addClass("lotto-box").removeClass("lotto-box-disabled");n.find("input").css("cursor","auto");$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error")},250),toastr.success("Pick saved."),window.getWinningDraws(),i="Add")}}),!1):!1});$(document).on("click",".button-delete",function(i){i.preventDefault();var r=$(this),u=r.closest("tr"),f=r.closest("form");bootbox.confirm("Are you sure you want to delete this pick?",function(i){if(i){$(".field-validation-error > span").each(function(){$(this).html("")});$("#mega-millions-add-form").validate().resetForm();var e={id:r.attr("data-id")};$.ajax({url:window.deleteAction+"?checkType="+t("checkType"),context:this,contentType:"application/x-www-form-urlencoded",type:"DELETE",datatype:"json",data:e,error:function(){n(u,"Pick could not be deleted.")},success:function(){u.find("*").not(".btn").not("span").each(function(){$(this).addClass("highlighted")});setTimeout(function(){f.remove();window.getWinningDraws();$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error")},250);toastr.success("Pick deleted.")}})}})});$(document).on("click",".button-edit",function(n){var t,r;n.preventDefault();i="Edit";$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error");t=$(this).closest("tr");c=t.find("input:eq(0)").val();l=t.find("input:eq(1)").val();a=t.find("input:eq(2)").val();v=t.find("input:eq(3)").val();y=t.find("input:eq(4)").val();p=t.find("input:eq(5)").val();$(this).hide();$(".button-delete").hide();$(".button-edit").hide();$(this).nextAll(".button-cancel").show();$(this).nextAll(".button-update").show();$(".field-validation-error > span").each(function(){$(this).html("")});$("#mega-millions-add-form").validate().resetForm();r=$("#button-add").closest("tr");$("#button-add").attr("disabled",!0);$("#button-clear").attr("disabled",!0);r.find("input").val("").removeClass("lotto-box").addClass("lotto-box-disabled").attr("disabled",!0);r.find("input").css("cursor","not-allowed");t=$(this).closest("tr");t.find("input").addClass("lotto-box").removeClass("lotto-text").attr("readonly",!1)});$(document).on("click",".button-cancel",function(n){var t,r;n.preventDefault();i="Add";$(".field-validation-error").addClass("field-validation-valid");$(".field-validation-error").removeClass("field-validation-error");$(".field-validation-error > span").each(function(){$(this).html("")});$(".button-update").hide();$(this).hide();$(".button-delete").show();$(".button-edit").show();$("#add-pick-row").attr("disabled",!1);$(this).nextAll(".button-cancel:first").hide();$(".lotto-box").removeClass("input-validation-error");t=$(this).closest("tr");t.find("input:eq(0)").val(c);t.find("input:eq(1)").val(l);t.find("input:eq(2)").val(a);t.find("input:eq(3)").val(v);t.find("input:eq(4)").val(y);t.find("input:eq(5)").val(p);t.find("input").removeClass("lotto-box").addClass("lotto-text").attr("readonly",!0);$("#button-add").attr("disabled",!1);$("#button-clear").attr("disabled",!1);r=$("#button-add").closest("tr");r.find("input").attr("disabled",!1).addClass("lotto-box").removeClass("lotto-box-disabled");r.find("input").css("cursor","auto")});s=function(){$.validator.addMethod("checkNumber2",function(n,t){var i=!1,r=$(t).closest("tr"),u=parseInt(r.find("input:eq(0)").val()),f=parseInt(r.find("input:eq(1)").val());return u!==f&&(i=!0),i});$.validator.addMethod("checkNumber3",function(n,t){var r=!1,i=$(t).closest("tr"),f=parseInt(i.find("input:eq(0)").val()),e=parseInt(i.find("input:eq(1)").val()),u=parseInt(i.find("input:eq(2)").val());return u!==f&&u!==e&&(r=!0),r});$.validator.addMethod("checkNumber4",function(n,t){var u=!1,i=$(t).closest("tr"),f=parseInt(i.find("input:eq(0)").val()),e=parseInt(i.find("input:eq(1)").val()),o=parseInt(i.find("input:eq(2)").val()),r=parseInt(i.find("input:eq(3)").val());return r!==f&&r!==e&&r!==o&&(u=!0),u});$.validator.addMethod("checkNumber5",function(n,t){var u=!1,i=$(t).closest("tr"),f=parseInt(i.find("input:eq(0)").val()),e=parseInt(i.find("input:eq(1)").val()),o=parseInt(i.find("input:eq(2)").val()),s=parseInt(i.find("input:eq(3)").val()),r=parseInt(i.find("input:eq(4)").val());return r!==f&&r!==e&&r!==o&&r!==s&&(u=!0),u});$('[name*="second-pick"]').each(function(){$(this).rules("add",{checkNumber2:!0,messages:{checkNumber2:"Duplicate"}})});$('[name*="third-pick"]').each(function(){$(this).rules("add",{checkNumber3:!0,messages:{checkNumber3:"Duplicate"}})});$('[name*="fourth-pick"]').each(function(){$(this).rules("add",{checkNumber4:!0,messages:{checkNumber4:"Duplicate"}})});$('[name*="fifth-pick"]').each(function(){$(this).rules("add",{checkNumber5:!0,messages:{checkNumber5:"Duplicate"}})})};$("input[type=tel]").keydown(function(n){if($.inArray(n.keyCode,[46,8,9,27,13,110,116,123])===-1&&(n.keyCode!==65||n.ctrlKey!==!0&&n.metaKey!==!0)&&(!(n.keyCode>=35)||!(n.keyCode<=40))){var t=$(this);((n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)||n.keyCode===48&&t.val()==="")&&(t.addClass("highlight-pink"),n.preventDefault(),setTimeout(function(){t.removeClass("highlight-pink")},250))}});$("[id^='numbers-table']").on("click",".lotto-box",function(){$(this).select()});$("#add-pick-table").on("click",".lotto-box",function(){$(this).select()});$("#add-pick-table-noauth").on("click",".lotto-box",function(){$(this).select()});$(document).ajaxStart(function(){$("#logoImage").css({top:-100,left:-100,position:"absolute"});$(":button").prop("disabled",!0);$("#ajax-spinner-container").show()}).ajaxStop(function(){$("#ajax-spinner-container").hide();$("#logoImage").css({top:0,left:0,position:"absolute"});$(":button").prop("disabled",!1);i==="Edit"&&($("#button-add").attr("disabled",!0),$("#button-clear").attr("disabled",!0))});$(window).resize(function(){u();r()});window.getWinningDraws=function(){checkType=="set"?$.ajax({type:"GET",url:window.getWinningNumbersAction+"?checkType="+t("checkType"),success:function(n){$("#winning-draws").html(n);$("#draws-heading").find("*").not(".btn").addClass("highlight-yellow");setTimeout(function(){$("#draws-heading").find("*").not(".btn").removeClass("highlight-yellow")},150)},error:function(n){alert(n.errorText)}}):$.ajax({type:"GET",url:window.getWinningNumbersActionAnonymous+"?checkType="+t("checkType"),success:function(n){$("#winning-draws").html(n);$("#winning-draws").find("*").not(".btn").addClass("highlight-yellow");setTimeout(function(){$("#winning-draws").find("*").not(".btn").removeClass("highlight-yellow")},150)},error:function(n){alert(n.errorText)}})};$("#odata-link").on("click",function(n){n.preventDefault();window.open(odataAction,"oddata-window","width=1350,height=800")});$(".button-update").hide();$(".button-cancel").hide();$(".lotto-text").each(function(){$(this).attr("readonly",!0)});s();window.getWinningDraws();$(window).load(function(){u();r()});f=$("#mega-millions-form");h=f.clone(!0);f.remove();i="Add";$("#elmah-log-link").on("click",function(n){n.preventDefault();window.open(elmahAction,"elmah-log-window","width=1350,height=800")});$("#btn-quick-check-not-logged-in").on("click",function(){window.location=indexActionQuick});$("#btn-quick-check-logged-in").on("click",function(){window.location=indexActionQuick});$("#btn-quick-check-landscape-not-logged-in").on("click",function(){window.location=indexActionQuick});$("#btn-quick-check-landscape-logged-in").on("click",function(){window.location=indexActionQuick});$("#btn-saved-picks").on("click",function(){window.location=indexActionSet});e=function(){window.setTimeout(function(){var n=$(window).width();n<480?($("#portrait-container").show(),$("#landscape-container").hide()):($("#portrait-container").hide(),$("#landscape-container").show());r()},200)};e();$(window).on("orientationchange",function(){e()});toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-full-width",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"0",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};o=function(){$.ajax({url:window.userAgreementUrl,success:function(n){bootbox.dialog({closeButton:!1,message:n,title:"User Agreement",buttons:{main:{label:"I agree to the user agreement",className:"btn-primary",callback:function(){$.ajax({type:"GET",url:window.userAgreementFlagAction})}}}})}})};userAuthorized||userAgreementMessage!=""&&o();toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-full-width",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"400",timeOut:"1500",extendedTimeOut:"1500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};$("#user-agreement-link").on("click",function(){o()});$.fn.animateRotate=function(n,t,i,r){return this.each(function(){var u=$(this);$({deg:0}).animate({deg:n},{duration:t,easing:i,step:function(n){u.css({transform:"rotate("+n+"deg)"})},complete:r||$.noop})})};window.setTimeout(function(){$("#rotate-me").animateRotate(360,1200)},50)});